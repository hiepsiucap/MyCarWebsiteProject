<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test Car API</title>
</head>
<body>
    <h1>Create a new Car</h1>
    <form id="carForm">
        <label for="ThongTinXe">Car Information:</label> <input type="text"
            id="ThongTinXe" name="ThongTinXe" required><br>
        <label for="ChoNgoi">Number of Seats:</label> <input type="number"
            id="ChoNgoi" name="ChoNgoi" required><br>
        <label for="NhienLieuThu">Fuel Consumption (L/100km):</label> <input
            type="number" step="0.01" id="NhienLieuThu" name="NhienLieuThu"><br>
        <label for="LoaiNhienLieu">Fuel Type:</label> <input type="text"
            id="LoaiNhienLieu" name="LoaiNhienLieu"><br>
        <label for="HopSo">Transmission Type:</label> <input type="text"
            id="HopSo" name="HopSo"><br>
        <label for="Gia">Price:</label> <input type="number"
            id="Gia" name="Gia"><br>
        <label for="MoTa">Description:</label> <textarea
            id="MoTa" name="MoTa"></textarea><br>
        <label for="DanhGia">Rating:</label> <input type="text"
            id="DanhGia" name="DanhGia"><br>
        <label for="ViTri">Location:</label> <input type="text"
            id="ViTri" name="ViTri"><br>
        <label for="Anh">Image:</label> <input type="file"
            id="Anh" name="Anh"><br>
        <label for="TrangThai">Status:</label> <input type="text"
            id="TrangThai" name="TrangThai"><br>
        <label for="LuotChoThue">Rent Count:</label> <input type="number"
            id="LuotChoThue" name="LuotChoThue"><br>
        <label for="LuotDanhGia">Review Count:</label> <input type="number"
            id="LuotDanhGia" name="LuotDanhGia"><br>
        <label for="DanhGiaTrungBinh">Average Rating:</label> <input type="number"
            step="0.01" id="DanhGiaTrungBinh" name="DanhGiaTrungBinh"><br>
        <label for="GiayToXe">Vehicle Papers:</label> <input type="text"
            id="GiayToXe" name="GiayToXe"><br>
        <label for="GiaChoThue">Rent Price:</label> <input type="number"
            id="GiaChoThue" name="GiaChoThue"><br>
        <label for="ThongTinLienQuan">Related Information:</label> <input type="text"
            id="ThongTinLienQuan" name="ThongTinLienQuan"><br>
        <label for="DieuKhoan">Terms and Conditions:</label> <input type="text"
            id="DieuKhoan" name="DieuKhoan"><br>
        <button type="button" onclick="createCar()">Create Car</button>
    </form>
    <p id="message"></p>

    <script>
        function createCar() {
            const ThongTinXe = document.getElementById('ThongTinXe').value;
            const ChoNgoi = document.getElementById('ChoNgoi').value;
            const NhienLieuThu = document.getElementById('NhienLieuThu').value;
            const LoaiNhienLieu = document.getElementById('LoaiNhienLieu').value;
            const HopSo = document.getElementById('HopSo').value;
            const Gia = document.getElementById('Gia').value;
            const MoTa = document.getElementById('MoTa').value;
            const DanhGia = document.getElementById('DanhGia').value;
            const ViTri = document.getElementById('ViTri').value;
            const Anh = document.getElementById('Anh').value;
            const TrangThai = document.getElementById('TrangThai').value;
            const LuotChoThue = document.getElementById('LuotChoThue').value;
            const LuotDanhGia = document.getElementById('LuotDanhGia').value;
            const DanhGiaTrungBinh = document.getElementById('DanhGiaTrungBinh').value;
            const GiayToXe = document.getElementById('GiayToXe').value;
            const GiaChoThue = document.getElementById('GiaChoThue').value;
            const ThongTinLienQuan = document.getElementById('ThongTinLienQuan').value;
            const DieuKhoan = document.getElementById('DieuKhoan').value;

            const carData = {
                ThongTinXe: ThongTinXe,
                ChoNgoi: ChoNgoi,
                NhienLieuThu: NhienLieuThu,
                LoaiNhienLieu: LoaiNhienLieu,
                HopSo: HopSo,
                Gia: Gia,
                MoTa: MoTa,
                DanhGia: DanhGia,
                ViTri: ViTri,
                Anh: Anh,
                TrangThai: TrangThai,
                LuotChoThue: LuotChoThue,
                LuotDanhGia: LuotDanhGia,
                DanhGiaTrungBinh: DanhGiaTrungBinh,
                GiayToXe: GiayToXe,
                GiaChoThue: GiaChoThue,
                ThongTinLienQuan: ThongTinLienQuan,
                DieuKhoan: DieuKhoan
            };

            try {
                JSON.parse(JSON.stringify(carData)); // Check if carData is valid JSON
            } catch (error) {
                document.getElementById('message').textContent = `Error: Car data is not in valid JSON format`;
                return;
            }

            fetch('http://localhost:8080/cars', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(carData)
            })
            .then(response => {
                if (!response.ok) {
                    return response.text().then(text => {
                        document.getElementById('message').textContent = `Error: ${text}`;
                    });
                }
                document.getElementById('message').textContent = 'Car created successfully!';
            })
            .catch(error => {
                document.getElementById('message').textContent = `Error: ${error}`;
            });
        }
    </script>
</body>
</html>
